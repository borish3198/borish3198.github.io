# Minishell 파싱부 정리

### 2-2 토크나이저 구현

- 토크나이저란?

```bash
ls -a -l >> a < b > c | grep "" | cat << x > y

ls / -a / -l / >> / a / < / b / > / c / | / grep / "" / | / cat / << / x / > / y
```

: 긴 문자열 형태로 들어오는 명령어를 토큰(형태소)으로 쪼개는 역할을 하는 것이 토크나이저이다. 여기서 토큰이랑 의미를 가지는 가장 작은 문자 조합이며 토큰화가 제대로 이뤄지지 않으면 추후 파싱이 되더라도 명령어를 실행하는 과정에서 문제가 생기기 때문에 정확하게 문자열을 나누는 것이 중요하다.

- 문자열 분할 기준
    
    : 최초 토큰화를 생각할 때 나는 당연히 공백(whitespace)을 기준으로 split을 하면 문제가 없으리라 생각했다. 하지만 **리다이렉션의 경우 공백없이 연달아 입력해도 문제없이 동작**한다는 사실을 스터디를 통해 알게되면서 토큰화 하는 과정을 다시 고려해야 했다. 추가로 토큰화 하는 과정에서 따옴표를 처리해주고, 환경 변수를 불러와야하기 때문에 토큰으로 쪼갤 수 있는 문자열들을 정리하고 그에 맞는 규칙을 확립하는 과정으로 토크나이저를 구현하고자 한다.
    
- 분할 기준
    1. ~~공백 (whitespace)~~
    2. 파이프
    3. 리다이렉션 기호( > / < / >> / <<)
        
        : >> / << 의 경우 >/< 리다이렉션 기호에서 한 인덱스 더 조회하는 식으로 확인
        
    4. && / || 연산
    5. $ 환경변수
        
        : $의 경우 flag를 활용하여  작은따옴표에 있는 경우를 따로 처리해주고
        
           그 외의 경우 다른 $ 문자가 오거나 공백이 올때까지 저장한 문자열을 추가
        
- 분할  방법
    1. 입력받은 명령어 문자열을 기준 한글자씩 순회
    2. 상단  분할 기준에 해당하는 글자가 있을 경우 분할하여 2중 배열에 저장
    3. 토큰  별 trim으로 좌우 공백을 제거해줌
